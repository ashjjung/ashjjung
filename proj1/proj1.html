<!DOCTYPE html>
<html>
<head>
    <title>Project 1</title>
</head>
<body>
  <h2> Project 1 - Images of the Russian Empire</h2> 
  <h3> Goal </h3>
  <p> Align misaligned RGB color channels in scanned images and improve image contrast using various techniques.</p>
  <h3> Approach</h3>
  <ol> 
  <li> Read an image and splitting it into three equal parts, which represent the blue, green, and red color channels, respectively.</li> 
  <li> Crop the 5% of the border of color channels.</li>
  <li> Use image pyramid to perform multi-level image alignment.</li>
    <ul>
        <li>
            Create progressively smaller versions of the images using an image pyramid. 
        </li>
        <li> Align them from the lowest resolution to the highest, refining the offset at each level using NCC to determine the best alignment between the red and green channels relative to the blue channel.</li>
        <li> At the lowest level, the shift range is set to [-5,5], as a wider search range is necessary. </li>
        <li> Once the best shift is estimated at this level, the offset is doubled at higher levels, and the search range is refined to [-1,1] within the estimated offset.</li>
    </ul>
  <li> Stack RGB channels to render the image.</li>
  </ol>
  <h3> Bells and whistles </h3>
  <ul>
  <li> Automatic Contrast</li>
  <p> I tried three different methods of automatic contrast(histogram equalization), and CLAHE histogram equalization produced the best image out of these methods. </p>
  <ul>
    <li> Convert rgb to hsv color space, apply the histogram equalization on intensity of the image</li>
    <li> CLAHE Histogram Equalization method </li>
    <li> Histogram equalization for each color channel </li>
  </ul>
  <li> Better features
  <p> Applied the Canny edge detector to each level of the image pyramid to extract edge maps, focusing on structural features for more accurate alignment of color channels. </p>
  </li>
  </ul>
  <h3> Results </h3>
  <body>
<div class="image-container">
    <img src="./img/cathedral_result.jpg" alt="Cathedral" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (12, 3), Green Offset: (5, 2)</div>
</div>

<div class="image-container">
    <img src="./img/church_result.jpg" alt="Church" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (58, -4), Green Offset: (25, 4)</div>
</div>

<div class="image-container">
    <img src="./img/emir_result.jpg" alt="Emir" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (107, 40), Green Offset: (49, 23)</div>
</div>

<div class="image-container">
    <img src="./img/harvesters_result.jpg" alt="Harvesters" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (118, 11), Green Offset: (60, 18)</div>
</div>

<div class="image-container">
    <img src="./img/icon_result.jpg" alt="Icon" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (90, 22), Green Offset: (38, 16)</div>
</div>

<div class="image-container">
    <img src="./img/lady_result.jpg" alt="Lady" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (120, 13), Green Offset: (57, 9)</div>
</div>

<div class="image-container">
    <img src="./img/monastery_result.jpg" alt="Monastery" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (3, 2), Green Offset: (-3, 2)</div>
</div>

<div class="image-container">
    <img src="./img/melons_result.jpg" alt="Melons" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (177, 14), Green Offset: (79, 9)</div>
</div>

<div class="image-container">
    <img src="./img/onion_church_result.jpg" alt="Onion Church" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (107, 34), Green Offset: (52, 30)</div>
</div>

<div class="image-container">
    <img src="./img/sculpture_result.jpg" alt="Sculpture" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (140, -27), Green Offset: (33, -11)</div>
</div>

<div class="image-container">
    <img src="./img/self_portrait_result.jpg" alt="Self Portrait" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (175, 37), Green Offset: (77, 29)</div>
</div>

<div class="image-container">
    <img src="./img/three_generations_result.jpg" alt="Three Generations" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (115, 12), Green Offset: (57, 17)</div>
</div>

<div class="image-container">
    <img src="./img/tobolsk_result.jpg" alt="Tobolsk" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (6, 3), Green Offset: (3, 3)</div>
</div>

<div class="image-container">
    <img src="./img/train_result.jpg" alt="Train" style="max-width: 30%; height: auto;">
    <div class="offset-text">Red Offset: (84, 34), Green Offset: (40, 8)</div>
</div>
</body>
</body>
</html>